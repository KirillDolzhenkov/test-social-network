/*! For license information please see main.0441d598.chunk.js.LICENSE.txt */
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,s){e.exports={dialogsPage:"Dialogs_dialogsPage__2-zGa",dialogs:"Dialogs_dialogs__3K-Xy",dialog:"Dialogs_dialog__ZEC-O",messages:"Dialogs_messages__3kr4z",message:"Dialogs_message__nXIdA"}},26:function(e,t,s){e.exports={items:"Users_items__sAzYH",selectedPage:"Users_selectedPage__UEP4h"}},27:function(e,t,s){e.exports={postBlock:"ContentArea_postBlock__3Ivjo",posts:"ContentArea_posts__2_nbj"}},28:function(e,t,s){e.exports={header:"Header_header__WdcwP",loginBlock:"Header_loginBlock__38Nj1"}},38:function(e,t,s){},39:function(e,t,s){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__1_i-h"}},40:function(e,t,s){e.exports={items:"Post_items__1-enr"}},46:function(e,t,s){},47:function(e,t,s){},6:function(e,t,s){e.exports={navbar:"Navbar_navbar__3S2BG",item:"Navbar_item__k2Crj",active:"Navbar_active__28fRt"}},72:function(e,t,s){},73:function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),r=s(19),a=s.n(r),c=(s(46),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,74)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;s(e),n(e),i(e),r(e),a(e)}))}),o=s(4),l=(s(47),s(6)),u=s.n(l),d=s(0),j=function(e){return Object(d.jsxs)("div",{className:u.a.navbar,children:[Object(d.jsx)("div",{className:u.a.item,children:Object(d.jsx)(o.b,{to:"/Profile",activeClassName:u.a.active,children:"Profile"})}),Object(d.jsx)("div",{className:u.a.item,children:Object(d.jsx)(o.b,{to:"/Dialogs",activeClassName:u.a.active,children:"Messages"})}),Object(d.jsx)("div",{className:u.a.item,children:Object(d.jsx)(o.b,{to:"/Users",activeClassName:u.a.active,children:"Users"})}),Object(d.jsx)("div",{className:u.a.item,children:Object(d.jsx)(o.b,{to:"/News",activeClassName:u.a.active,children:"News"})}),Object(d.jsx)("div",{className:u.a.item,children:Object(d.jsx)(o.b,{to:"/Music",activeClassName:u.a.active,children:"Music"})}),Object(d.jsx)("div",{className:u.a.item,children:Object(d.jsx)(o.b,{to:"/Settings",activeClassName:u.a.active,children:"Settings"})})]})},g=s(3),b=s(11),O=s.n(b),p=function(e){return Object(d.jsx)("div",{className:O.a.dialog+""+O.a.active,children:Object(d.jsx)(o.b,{to:"/dialogs/"+e.id,children:e.name})})},h=function(e){return Object(d.jsx)("div",{className:O.a.message,children:e.message})},f=s(12),x=s(2),m={dialogs:[{id:1,name:"Dima"},{id:2,name:"Sasha"}],messages:[{id:1,message:"hello"},{id:2,message:"How are you?"}],newMessageText:""},S=s(5),v=Object(S.b)((function(e){return{dialogsPage:e.dialogPage}}),{addMessage:function(e){return{type:"SN/DIALOGS/ADD_MESSAGE",newMessage:e}},setNewMessageText:function(e){return{type:"SN/DIALOGS/SET_NEW_MESSAGE_TEXT",newText:e}}})((function(e){var t=e.dialogsPage,s=t.dialogs.map((function(e){return Object(d.jsx)(p,{name:e.name,id:e.id},e.id)})),n=t.messages.map((function(e){return Object(d.jsx)(h,{message:e.message,id:e.id},e.id)})),i=function(){t.newMessageText&&e.addMessage(t.newMessageText.trim())};return Object(d.jsxs)("div",{className:O.a.dialogsPage,children:[Object(d.jsx)("div",{className:O.a.dialogs,children:s}),Object(d.jsxs)("div",{className:O.a.messages,children:[n,Object(d.jsxs)("div",{children:[Object(d.jsx)("hr",{}),Object(d.jsx)("textarea",{value:t.newMessageText,maxLength:1e5,onChange:function(t){var s,n=null===(s=t.currentTarget)||void 0===s?void 0:s.value;e.setNewMessageText(n)},placeholder:"Write something",onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),i())}}),Object(d.jsx)("span",{children:Object(d.jsx)("button",{onClick:i,children:"Send"})})]})]})]})})),P=function(e){return Object(d.jsx)("div",{children:"Music Page Content"})},_=function(e){return Object(d.jsx)("div",{children:"News Page Content"})},E=function(e){return Object(d.jsx)("div",{children:"Settings Page Content"})},w=s(14),N=s(15),C=s(17),T=s(16),k=s(10),L=s.n(k),U=L.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"2f53ebc7-6e0c-44af-b6eb-a755cbe3639f"}}),I=function(e,t){return U.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},F={users:[],pageSize:5,totalUsersCount:19,currentPage:1,isFetching:!1,followingInProgress:[]},y=function(e){return{type:"SN/USERS/SET_USERS",users:e}},R=function(e){return{type:"SN/USERS/SET_TOTAL_USERS_COUNT",totalCount:e}},A=function(e){return{type:"SN/USERS/SET_IS_FETCHING",isFetching:e}},D=s.p+"static/media/defaultSmallUserPhoto.8101612b.png",M=s(26),G=s.n(M),W=function(e){for(var t=e.usersPage,s=Math.ceil(t.totalUsersCount/t.pageSize),n=[],i=1;i<=s;i++)n.push(i);return Object(d.jsxs)("div",{className:G.a.items,children:[Object(d.jsx)("div",{children:n.map((function(s){return Object(d.jsx)("span",{className:s===t.currentPage?G.a.selectedPage:"",onClick:function(){return e.onPageChanged(s)},children:s})}))}),Object(d.jsx)("hr",{}),t.users.map((function(t){var s,n;return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:Object(d.jsx)(o.b,{to:"/profile/"+t.id,children:Object(d.jsx)("img",{src:null!==t.photos.small?t.photos.small:D})})}),Object(d.jsx)("div",{children:Object(d.jsx)("b",{children:t.name})}),Object(d.jsx)("div",{style:{textDecoration:"underline",color:"blue"},children:"Write message"}),Object(d.jsx)("div",{children:t.followed?Object(d.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.setFollowingProgress(!0,t.id),L.a.delete("https://social-network.samuraijs.com/api/1.0/follow/".concat(t.id),{withCredentials:!0,headers:{"API-KEY":"2f53ebc7-6e0c-44af-b6eb-a755cbe3639f"}}).then((function(s){0===s.data.resultCode&&e.unFollow(t.id),e.setFollowingProgress(!1,t.id)}))},children:"unfollow"}):Object(d.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.setFollowingProgress(!0,t.id),L.a.post("https://social-network.samuraijs.com/api/1.0/follow/".concat(t.id),{},{withCredentials:!0,headers:{"API-KEY":"2f53ebc7-6e0c-44af-b6eb-a755cbe3639f"}}).then((function(s){0===s.data.resultCode&&e.follow(t.id),e.setFollowingProgress(!1,t.id)}))},children:"follow"})}),Object(d.jsxs)("div",{children:["country:",(null===(s=t.location)||void 0===s?void 0:s.country)?t.location.country:" - "]}),Object(d.jsxs)("div",{children:["city:",(null===(n=t.location)||void 0===n?void 0:n.city)?t.location.city:" - "]}),Object(d.jsx)("hr",{})]},t.id)}))]})},B=(s(72),function(e){return Object(d.jsx)("h1",{children:"loading..."})}),z=function(e){Object(C.a)(s,e);var t=Object(T.a)(s);function s(){var e;Object(w.a)(this,s);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.setIsFetching(!0),I(e.props.currentPage,e.props.pageSize).then((function(t){e.props.setIsFetching(!1),e.props.setUsers(t.items)}))},e}return Object(N.a)(s,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(d.jsx)(d.Fragment,{children:this.props.isFetching?Object(d.jsx)(B,{}):Object(d.jsx)(W,{usersPage:this.props.usersPage,pageSize:this.props.pageSize,totalUsersCount:this.props.totalUsersCount,currentPage:this.props.currentPage,follow:this.props.follow,unFollow:this.props.unFollow,setUsers:this.props.setUsers,setCurrentPage:this.props.setCurrentPage,setTotalUsersCount:this.props.setTotalUsersCount,onPageChanged:this.onPageChanged,followingInProgress:this.props.followingInProgress,setFollowingProgress:this.props.setFollowingProgress})})}}]),s}(i.a.Component),K=Object(S.b)((function(e){return{usersPage:e.usersPage,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{follow:function(e){return{type:"SN/USERS/FOLLOW",id:e}},unFollow:function(e){return{type:"SN/USERS/UNFOLLOW",id:e}},setUsers:y,setCurrentPage:function(e){return{type:"SN/USERS/SET_CURRENT_PAGE",currentPage:e}},setTotalUsersCount:R,setIsFetching:A,setFollowingProgress:function(e,t){return{type:"SN/USERS/TOGGLE_IS_FOLLOWING_PROGRESS",followingInProgress:e,id:t}},getUsersThunkCreator:function(e,t){return function(s){s(A(!0)),I(e,t).then((function(e){s(A(!1)),s(y(e.items)),s(R(e.totalCount))}))}}})(z),H=s(38),X=s.n(H),Y=s(39),J=s.n(Y),V=function(e){var t=e.profile;return t?Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:"https://i.redd.it/om4a8r7glhx21.png",alt:""})}),Object(d.jsxs)("div",{className:J.a.descriptionBlock,children:[Object(d.jsx)("img",{src:null!==t.photos.large?t.photos.large:D}),Object(d.jsx)("b",{children:t.fullName})]})]}):Object(d.jsx)(B,{})},Z=s(27),q=s.n(Z),Q={posts:[{id:1,message:"Hi dude",likesCount:2,isLiked:!1},{id:2,message:"nice photos!",likesCount:1,isLiked:!1}],newPostText:"",profile:null},$=s(40),ee=s.n($),te=Object(S.b)((function(e){return{profilePage:e.profilePage}}),(function(e){return{addLike:function(t,s){e(function(e,t){return{type:"SN/PROFILE/ADD_LIKE",id:e,isLiked:t}}(t,s))},removeLike:function(t,s){e(function(e,t){return{type:"SN/PROFILE/REMOVE_LIKE",id:e,isLiked:t}}(t,s))}}}))((function(e){return Object(d.jsxs)("div",{className:ee.a.items,children:[Object(d.jsx)("img",{src:"https://cdn4.iconfinder.com/data/icons/spring-festival/512/man-512.png",alt:""}),Object(d.jsxs)("b",{children:["UserName"," "]})," ",Object(d.jsx)("span",{children:e.message}),Object(d.jsx)("div",{children:e.isLiked?Object(d.jsxs)("button",{onClick:function(){e.removeLike(e.id,e.isLiked)},children:["Liked \u2665",e.likesCount]}):Object(d.jsxs)("button",{onClick:function(){e.addLike(e.id,e.isLiked)},children:["Like \u2661",e.likesCount]})}),Object(d.jsx)("hr",{})]})})),se=Object(S.b)((function(e){return{profilePage:e.profilePage}}),{addPost:function(e){return{type:"SN/PROFILE/ADD_POST",newPost:e}},setNewPostText:function(e){return{type:"SN/PROFILE/SET_NEW_POST_TEXT",newText:e}}})((function(e){var t=e.profilePage,s=t.posts.map((function(e){return Object(d.jsx)(te,{message:e.message,id:e.id,likesCount:e.likesCount,isLiked:e.isLiked},e.id)})),n=function(){t.newPostText&&e.addPost(t.newPostText)};return Object(d.jsxs)("div",{className:q.a.postBlock,children:[Object(d.jsx)("textarea",{value:t.newPostText,maxLength:1e5,onChange:function(t){var s,n=null===(s=t.currentTarget)||void 0===s?void 0:s.value;e.setNewPostText(n)},placeholder:"What's new?",onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),n())}}),Object(d.jsx)("span",{children:Object(d.jsx)("button",{onClick:n,children:"Post"})}),Object(d.jsx)("div",{className:q.a.posts,children:s})]})})),ne=function(e){return Object(d.jsxs)("div",{className:X.a.profile,children:[Object(d.jsx)(V,{profile:e.profile}),Object(d.jsx)(se,{})]})},ie=function(e){Object(C.a)(s,e);var t=Object(T.a)(s);function s(){return Object(w.a)(this,s),t.apply(this,arguments)}return Object(N.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId;t||(t=2),L.a.get("https://social-network.samuraijs.com/api/1.0/profile/"+t).then((function(t){e.props.setProfile(t.data)}))}},{key:"render",value:function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(ne,Object(x.a)(Object(x.a)({},this.props),{},{profile:this.props.profile}))})}}]),s}(i.a.Component),re=Object(g.e)(ie),ae=Object(S.b)((function(e){return{profile:e.profilePage.profile}}),{setProfile:function(e){return{type:"SN/PROFILE/SET_PROFILE",profile:e}}})(re),ce=s(28),oe=s.n(ce),le=s.p+"static/media/logo_part_1.230df42a.png",ue=s.p+"static/media/logo_part_2.7aafc755.png",de=function(e){return Object(d.jsxs)("div",{className:oe.a.header,children:[Object(d.jsx)("img",{src:le}),Object(d.jsx)("img",{src:ue}),Object(d.jsx)("div",{className:oe.a.loginBlock,children:e.isAuth?Object(d.jsx)("span",{style:{color:"white"},children:e.login}):Object(d.jsx)(o.b,{to:"/login",children:"login"})})]})},je={id:null,email:null,login:null,isAuth:!1},ge=function(e){Object(C.a)(s,e);var t=Object(T.a)(s);function s(){return Object(w.a)(this,s),t.apply(this,arguments)}return Object(N.a)(s,[{key:"componentDidMount",value:function(){var e=this;L.a.get("https://social-network.samuraijs.com/api/1.0/auth/me",{withCredentials:!0}).then((function(t){if(0===t.data.resultCode){var s=t.data.data;e.props.setAuthUserData(s)}}))}},{key:"render",value:function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(de,Object(x.a)({},this.props))})}}]),s}(i.a.Component),be=Object(S.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:function(e){return{type:"SN/SET_AUTH_USER_DATA",data:e}}})(ge),Oe=function(e){return Object(d.jsxs)("div",{className:"app-wrapper",children:[Object(d.jsx)(be,{}),Object(d.jsx)(j,{}),Object(d.jsxs)("div",{className:"app-wrapper-content",children:[Object(d.jsx)(g.a,{path:"/Profile/:userId?",render:function(){return Object(d.jsx)(ae,{})}}),Object(d.jsx)(g.a,{path:"/Dialogs",render:function(){return Object(d.jsx)(v,{})}}),Object(d.jsx)(g.a,{path:"/Users",render:function(){return Object(d.jsx)(K,{})}}),Object(d.jsx)(g.a,{path:"/News",render:function(){return Object(d.jsx)(_,{})}}),Object(d.jsx)(g.a,{path:"/Music",render:function(){return Object(d.jsx)(P,{})}}),Object(d.jsx)(g.a,{path:"/Settings",render:function(){return Object(d.jsx)(E,{})}})]})]})},pe=s(21),he=s(41),fe=Object(pe.b)({dialogPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;if("SN/DIALOGS/ADD_MESSAGE"===t.type){var s=Object(x.a)({},e),n={id:Math.floor((new Date).valueOf()*Math.random()),message:s.newMessageText};return s.messages=[].concat(Object(f.a)(e.messages),[n]),s.newMessageText="",s}if("SN/DIALOGS/SET_NEW_MESSAGE_TEXT"===t.type){var i=Object(x.a)({},e);return i.newMessageText=t.newText,i}return e},profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/PROFILE/ADD_POST":var s=Object(x.a)({},e),n={id:Math.floor((new Date).valueOf()*Math.random()),message:e.newPostText,likesCount:0,isLiked:!1};return s.posts=[n].concat(Object(f.a)(e.posts)),s.newPostText="",s;case"SN/PROFILE/SET_NEW_POST_TEXT":var i=Object(x.a)({},e);return i.newPostText=t.newText,i;case"SN/PROFILE/ADD_LIKE":var r=Object(x.a)(Object(x.a)({},e),{},{posts:e.posts.map((function(e){return e.id===t.id?Object(x.a)(Object(x.a)({},e),{},{isLiked:!0,likesCount:e.likesCount+1}):e}))});return r;case"SN/PROFILE/REMOVE_LIKE":var a=Object(x.a)(Object(x.a)({},e),{},{posts:e.posts.map((function(e){return e.id===t.id?Object(x.a)(Object(x.a)({},e),{},{isLiked:!1,likesCount:e.likesCount-1}):e}))});return a;case"SN/PROFILE/SET_PROFILE":return Object(x.a)(Object(x.a)({},e),{},{profile:t.profile});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/USERS/FOLLOW":return Object(x.a)(Object(x.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(x.a)(Object(x.a)({},e),{},{followed:!0}):e}))});case"SN/USERS/UNFOLLOW":return Object(x.a)(Object(x.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(x.a)(Object(x.a)({},e),{},{followed:!1}):e}))});case"SN/USERS/SET_USERS":return Object(x.a)(Object(x.a)({},e),{},{users:Object(f.a)(t.users)});case"SN/USERS/SET_CURRENT_PAGE":return Object(x.a)(Object(x.a)({},e),{},{currentPage:t.currentPage});case"SN/USERS/SET_TOTAL_USERS_COUNT":return Object(x.a)(Object(x.a)({},e),{},{totalUsersCount:t.totalCount});case"SN/USERS/SET_IS_FETCHING":return Object(x.a)(Object(x.a)({},e),{},{isFetching:t.isFetching});case"SN/USERS/TOGGLE_IS_FOLLOWING_PROGRESS":return Object(x.a)(Object(x.a)({},e),{},{followingInProgress:t.followingInProgress?[].concat(Object(f.a)(e.followingInProgress),[t.id]):Object(f.a)(e.followingInProgress.filter((function(e){return e!==t.id})))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/SET_AUTH_USER_DATA":return Object(x.a)(Object(x.a)(Object(x.a)({},e),t.data),{},{isAuth:!0});default:return e}}}),xe=Object(pe.c)(fe,Object(pe.a)(he.a));window.__store__=xe;var me=function(e){a.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(o.a,{children:Object(d.jsx)(S.a,{store:xe,children:Object(d.jsx)(Oe,{})})})}),document.getElementById("root"))};me(xe.getState()),xe.subscribe((function(){me(xe.getState())})),c()}},[[73,1,2]]]);
//# sourceMappingURL=main.0441d598.chunk.js.map