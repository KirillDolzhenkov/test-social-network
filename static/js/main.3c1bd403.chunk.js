/*! For license information please see main.3c1bd403.chunk.js.LICENSE.txt */
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,n){e.exports={dialogsPage:"Dialogs_dialogsPage__2-zGa",dialogs:"Dialogs_dialogs__3K-Xy",dialog:"Dialogs_dialog__ZEC-O",messages:"Dialogs_messages__3kr4z",message:"Dialogs_message__nXIdA"}},25:function(e,t,n){e.exports={items:"Users_items__sAzYH",selectedPage:"Users_selectedPage__UEP4h"}},26:function(e,t,n){e.exports={postBlock:"ContentArea_postBlock__3Ivjo",posts:"ContentArea_posts__2_nbj"}},27:function(e,t,n){e.exports={header:"Header_header__WdcwP",loginBlock:"Header_loginBlock__38Nj1"}},38:function(e,t,n){},39:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__1_i-h"}},40:function(e,t,n){e.exports={items:"Post_items__1-enr"}},47:function(e,t,n){},48:function(e,t,n){},6:function(e,t,n){e.exports={navbar:"Navbar_navbar__3S2BG",item:"Navbar_item__k2Crj",active:"Navbar_active__28fRt"}},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),i=n(19),c=n.n(i),a=(n(47),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),s(e),r(e),i(e),c(e)}))}),o=n(4),u=(n(48),n(6)),l=n.n(u),j=n(0),d=function(e){return Object(j.jsxs)("div",{className:l.a.navbar,children:[Object(j.jsx)("div",{className:l.a.item,children:Object(j.jsx)(o.b,{to:"/Profile",activeClassName:l.a.active,children:"Profile"})}),Object(j.jsx)("div",{className:l.a.item,children:Object(j.jsx)(o.b,{to:"/Dialogs",activeClassName:l.a.active,children:"Messages"})}),Object(j.jsx)("div",{className:l.a.item,children:Object(j.jsx)(o.b,{to:"/Users",activeClassName:l.a.active,children:"Users"})}),Object(j.jsx)("div",{className:l.a.item,children:Object(j.jsx)(o.b,{to:"/News",activeClassName:l.a.active,children:"News"})}),Object(j.jsx)("div",{className:l.a.item,children:Object(j.jsx)(o.b,{to:"/Music",activeClassName:l.a.active,children:"Music"})}),Object(j.jsx)("div",{className:l.a.item,children:Object(j.jsx)(o.b,{to:"/Settings",activeClassName:l.a.active,children:"Settings"})})]})},b=n(3),O=n(2),g=n(12),h=n(13),p=n(15),f=n(14),x=n(11),S=n.n(x),v=function(e){return Object(j.jsx)("div",{className:S.a.dialog+""+S.a.active,children:Object(j.jsx)(o.b,{to:"/dialogs/"+e.id,children:e.name})})},m=function(e){return Object(j.jsx)("div",{className:S.a.message,children:e.message})},P=function(e){var t=e.dialogsPage,n=t.dialogs.map((function(e){return Object(j.jsx)(v,{name:e.name,id:e.id},e.id)})),s=t.messages.map((function(e){return Object(j.jsx)(m,{message:e.message,id:e.id},e.id)})),r=function(){t.newMessageText&&e.addMessage(t.newMessageText.trim())};return e.isAuth?Object(j.jsxs)("div",{className:S.a.dialogsPage,children:[Object(j.jsx)("div",{className:S.a.dialogs,children:n}),Object(j.jsxs)("div",{className:S.a.messages,children:[s,Object(j.jsxs)("div",{children:[Object(j.jsx)("hr",{}),Object(j.jsx)("textarea",{value:t.newMessageText,maxLength:1e5,onChange:function(t){var n,s=null===(n=t.currentTarget)||void 0===n?void 0:n.value;e.setNewMessageText(s)},placeholder:"Write something",onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),r())}}),Object(j.jsx)("span",{children:Object(j.jsx)("button",{onClick:r,children:"Send"})})]})]})]}):Object(j.jsx)(b.a,{to:"/Login"})},_=n(16),E={dialogs:[{id:1,name:"Dima"},{id:2,name:"Sasha"}],messages:[{id:1,message:"hello"},{id:2,message:"How are you?"}],newMessageText:""},N=n(5),T=n(10),w=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(j.jsx)(P,Object(O.a)({},this.props))}}]),n}(r.a.Component),C=Object(T.c)(Object(N.b)((function(e){return{dialogsPage:e.dialogPage,isAuth:e.auth.isAuth}}),{addMessage:function(e){return{type:"SN/DIALOGS/ADD_MESSAGE",newMessage:e}},setNewMessageText:function(e){return{type:"SN/DIALOGS/SET_NEW_MESSAGE_TEXT",newText:e}}}))(w),k=function(e){return Object(j.jsx)("div",{children:"Music Page Content"})},L=function(e){return Object(j.jsx)("div",{children:"News Page Content"})},U=function(e){return Object(j.jsx)("div",{children:"Settings Page Content"})},I=n(37),y=n.n(I).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"2f53ebc7-6e0c-44af-b6eb-a755cbe3639f"}}),F=function(e,t){return y.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},A=function(e){return y.post("follow/".concat(e))},R=function(e){return y.delete("follow/".concat(e))},D=function(e){return y.get("profile/".concat(e))},M=function(){return y.get("auth/me")},G={users:[],pageSize:5,totalUsersCount:19,currentPage:1,isFetching:!1,followingInProgress:[]},W=function(e){return{type:"SN/USERS/FOLLOW",id:e}},B=function(e){return{type:"SN/USERS/UNFOLLOW",id:e}},z=function(e){return{type:"SN/USERS/SET_USERS",users:e}},H=function(e){return{type:"SN/USERS/SET_TOTAL_USERS_COUNT",totalCount:e}},K=function(e){return{type:"SN/USERS/SET_IS_FETCHING",isFetching:e}},X=function(e,t){return{type:"SN/USERS/TOGGLE_IS_FOLLOWING_PROGRESS",followingInProgress:e,id:t}},J=n.p+"static/media/defaultSmallUserPhoto.8101612b.png",V=n(25),Y=n.n(V),Z=function(e){for(var t=e.usersPage,n=Math.ceil(t.totalUsersCount/t.pageSize),s=[],r=1;r<=n;r++)s.push(r);return Object(j.jsxs)("div",{className:Y.a.items,children:[Object(j.jsx)("div",{children:s.map((function(n){return Object(j.jsx)("span",{className:n===t.currentPage?Y.a.selectedPage:"",onClick:function(){return e.onPageChanged(n)},children:n})}))}),Object(j.jsx)("hr",{}),t.users.map((function(t){var n,s;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)(o.b,{to:"/profile/"+t.id,children:Object(j.jsx)("img",{src:null!==t.photos.small?t.photos.small:J})})}),Object(j.jsx)("div",{children:Object(j.jsx)("b",{children:t.name})}),Object(j.jsx)("div",{style:{textDecoration:"underline",color:"blue"},children:"Write message"}),Object(j.jsx)("div",{children:t.followed?Object(j.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unFollowThunkCreator(t.id)},children:"unfollow"}):Object(j.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.followThunkCreator(t.id)},children:"follow"})}),Object(j.jsxs)("div",{children:["country:",(null===(n=t.location)||void 0===n?void 0:n.country)?t.location.country:" - "]}),Object(j.jsxs)("div",{children:["city:",(null===(s=t.location)||void 0===s?void 0:s.city)?t.location.city:" - "]}),Object(j.jsx)("hr",{})]},t.id)}))]})},q=(n(73),function(e){return Object(j.jsx)("h1",{children:"loading..."})}),Q=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(g.a)(this,n);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.setIsFetching(!0),F(e.props.currentPage,e.props.pageSize).then((function(t){e.props.setIsFetching(!1),e.props.setUsers(t.items)}))},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:this.props.isFetching?Object(j.jsx)(q,{}):Object(j.jsx)(Z,{usersPage:this.props.usersPage,pageSize:this.props.pageSize,totalUsersCount:this.props.totalUsersCount,currentPage:this.props.currentPage,follow:this.props.follow,unFollow:this.props.unFollow,setUsers:this.props.setUsers,setCurrentPage:this.props.setCurrentPage,setTotalUsersCount:this.props.setTotalUsersCount,onPageChanged:this.onPageChanged,followingInProgress:this.props.followingInProgress,setFollowingProgress:this.props.setFollowingProgress,unFollowThunkCreator:this.props.unFollowThunkCreator,followThunkCreator:this.props.followThunkCreator})})}}]),n}(r.a.Component),$=Object(T.c)(Object(N.b)((function(e){return{usersPage:e.usersPage,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{follow:W,unFollow:B,setUsers:z,setCurrentPage:function(e){return{type:"SN/USERS/SET_CURRENT_PAGE",currentPage:e}},setTotalUsersCount:H,setIsFetching:K,setFollowingProgress:X,getUsersThunkCreator:function(e,t){return function(n){n(K(!0)),F(e,t).then((function(e){n(K(!1)),n(z(e.items)),n(H(e.totalCount))}))}},unFollowThunkCreator:function(e){return function(t){t(X(!0,e)),R(e).then((function(n){0===n.data.resultCode&&t(B(e)),t(X(!1,e))}))}},followThunkCreator:function(e){return function(t){t(X(!0,e)),A(e).then((function(n){0===n.data.resultCode&&t(W(e)),t(X(!1,e))}))}}}))(Q),ee=n(38),te=n.n(ee),ne=n(39),se=n.n(ne),re=function(e){var t=e.profile;return t?Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:se.a.descriptionBlock,children:[Object(j.jsx)("img",{src:null!==t.photos.large?t.photos.large:J}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)("b",{children:t.fullName})}),Object(j.jsx)("div",{children:t.aboutMe})]})]})}):Object(j.jsx)(q,{})},ie=n(26),ce=n.n(ie),ae={posts:[],newPostText:"",profile:null},oe=n(40),ue=n.n(oe),le=Object(N.b)((function(e){return{profilePage:e.profilePage}}),(function(e){return{addLike:function(t,n){e(function(e,t){return{type:"SN/PROFILE/ADD_LIKE",id:e,isLiked:t}}(t,n))},removeLike:function(t,n){e(function(e,t){return{type:"SN/PROFILE/REMOVE_LIKE",id:e,isLiked:t}}(t,n))}}}))((function(e){return Object(j.jsxs)("div",{className:ue.a.items,children:[Object(j.jsx)("img",{src:"https://cdn4.iconfinder.com/data/icons/spring-festival/512/man-512.png",alt:""}),Object(j.jsxs)("b",{children:["UserName"," "]})," ",Object(j.jsx)("span",{children:e.message}),Object(j.jsx)("div",{children:e.isLiked?Object(j.jsxs)("button",{onClick:function(){e.removeLike(e.id,e.isLiked)},children:["Liked \u2665",e.likesCount]}):Object(j.jsxs)("button",{onClick:function(){e.addLike(e.id,e.isLiked)},children:["Like \u2661",e.likesCount]})}),Object(j.jsx)("hr",{})]})})),je=Object(N.b)((function(e){return{profilePage:e.profilePage}}),{addPost:function(e){return{type:"SN/PROFILE/ADD_POST",newPost:e}},setNewPostText:function(e){return{type:"SN/PROFILE/SET_NEW_POST_TEXT",newText:e}}})((function(e){var t=e.profilePage,n=t.posts.map((function(e){return Object(j.jsx)(le,{message:e.message,id:e.id,likesCount:e.likesCount,isLiked:e.isLiked},e.id)})),s=function(){t.newPostText&&e.addPost(t.newPostText)};return Object(j.jsxs)("div",{className:ce.a.postBlock,children:[Object(j.jsx)("textarea",{value:t.newPostText,maxLength:1e5,onChange:function(t){var n,s=null===(n=t.currentTarget)||void 0===n?void 0:n.value;e.setNewPostText(s)},placeholder:"What's new?",onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),s())}}),Object(j.jsx)("span",{children:Object(j.jsx)("button",{onClick:s,children:"Post"})}),Object(j.jsx)("div",{className:ce.a.posts,children:n})]})})),de=function(e){return Object(j.jsxs)("div",{className:te.a.profile,children:[Object(j.jsx)(re,{profile:e.profile}),Object(j.jsx)(je,{})]})},be=n(42),Oe=function(e){return{isAuth:e.auth.isAuth}};var ge=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=2),this.props.getUserProfile(e)}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(de,Object(O.a)(Object(O.a)({},this.props),{},{profile:this.props.profile}))})}}]),n}(r.a.Component),he=Object(T.c)(Object(N.b)((function(e){return{profile:e.profilePage.profile,isAuth:e.auth.isAuth}}),{getUserProfile:function(e){return function(t){D(e).then((function(e){t({type:"SN/PROFILE/SET_PROFILE",profile:e.data})}))}}}),b.f,(function(e){return Object(N.b)(Oe)((function(t){var n=t.isAuth,s=Object(be.a)(t,["isAuth"]);return n?Object(j.jsx)(e,Object(O.a)({},s)):Object(j.jsx)(b.a,{to:"/Login"})}))}))(ge),pe=n(27),fe=n.n(pe),xe=n.p+"static/media/logo_part_1.230df42a.png",Se=n.p+"static/media/logo_part_2.7aafc755.png",ve=function(e){return Object(j.jsxs)("div",{className:fe.a.header,children:[Object(j.jsx)("img",{src:xe}),Object(j.jsx)("img",{src:Se}),Object(j.jsx)("div",{className:fe.a.loginBlock,children:e.isAuth?Object(j.jsxs)("div",{children:[Object(j.jsxs)("span",{style:{color:"white"},children:[e.login," "]})," ",Object(j.jsx)(o.b,{to:"/login",children:"Logout"})]}):Object(j.jsxs)("div",{children:[Object(j.jsx)(o.b,{to:"/login",children:"Login "}),Object(j.jsx)(o.b,{to:"/login",children:"Signup "})]})})]})},me={id:null,email:null,login:null,isAuth:!1},Pe=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(ve,Object(O.a)({},this.props))})}}]),n}(r.a.Component),_e=Object(N.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{getAuthUserData:function(){return function(e){M().then((function(t){if(0===t.data.resultCode){var n=t.data.data;e(function(e){return{type:"SN/SET_AUTH_USER_DATA",data:e}}(n))}}))}}})(Pe),Ee=function(e){return Object(j.jsx)("div",{children:"LoginPage"})},Ne=function(e){return Object(j.jsxs)("div",{className:"app-wrapper",children:[Object(j.jsx)(_e,{}),Object(j.jsx)(d,{}),Object(j.jsxs)("div",{className:"app-wrapper-content",children:[Object(j.jsx)(b.b,{path:"/Profile/:userId?",render:function(){return Object(j.jsx)(he,{})}}),Object(j.jsx)(b.b,{path:"/Dialogs",render:function(){return Object(j.jsx)(C,{})}}),Object(j.jsx)(b.b,{path:"/Users",render:function(){return Object(j.jsx)($,{})}}),Object(j.jsx)(b.b,{path:"/News",render:function(){return Object(j.jsx)(L,{})}}),Object(j.jsx)(b.b,{path:"/Music",render:function(){return Object(j.jsx)(k,{})}}),Object(j.jsx)(b.b,{path:"/Settings",render:function(){return Object(j.jsx)(U,{})}}),Object(j.jsx)(b.b,{path:"/Login",render:function(){return Object(j.jsx)(Ee,{})}})]})]})},Te=n(41),we=Object(T.b)({dialogPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;if("SN/DIALOGS/ADD_MESSAGE"===t.type){var n=Object(O.a)({},e),s={id:Math.floor((new Date).valueOf()*Math.random()),message:n.newMessageText};return n.messages=[].concat(Object(_.a)(e.messages),[s]),n.newMessageText="",n}if("SN/DIALOGS/SET_NEW_MESSAGE_TEXT"===t.type){var r=Object(O.a)({},e);return r.newMessageText=t.newText,r}return e},profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/PROFILE/ADD_POST":var n=Object(O.a)({},e),s={id:Math.floor((new Date).valueOf()*Math.random()),message:e.newPostText,likesCount:0,isLiked:!1};return n.posts=[s].concat(Object(_.a)(e.posts)),n.newPostText="",n;case"SN/PROFILE/SET_NEW_POST_TEXT":var r=Object(O.a)({},e);return r.newPostText=t.newText,r;case"SN/PROFILE/ADD_LIKE":var i=Object(O.a)(Object(O.a)({},e),{},{posts:e.posts.map((function(e){return e.id===t.id?Object(O.a)(Object(O.a)({},e),{},{isLiked:!0,likesCount:e.likesCount+1}):e}))});return i;case"SN/PROFILE/REMOVE_LIKE":var c=Object(O.a)(Object(O.a)({},e),{},{posts:e.posts.map((function(e){return e.id===t.id?Object(O.a)(Object(O.a)({},e),{},{isLiked:!1,likesCount:e.likesCount-1}):e}))});return c;case"SN/PROFILE/SET_PROFILE":return Object(O.a)(Object(O.a)({},e),{},{profile:t.profile});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/USERS/FOLLOW":return Object(O.a)(Object(O.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(O.a)(Object(O.a)({},e),{},{followed:!0}):e}))});case"SN/USERS/UNFOLLOW":return Object(O.a)(Object(O.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(O.a)(Object(O.a)({},e),{},{followed:!1}):e}))});case"SN/USERS/SET_USERS":return Object(O.a)(Object(O.a)({},e),{},{users:Object(_.a)(t.users)});case"SN/USERS/SET_CURRENT_PAGE":return Object(O.a)(Object(O.a)({},e),{},{currentPage:t.currentPage});case"SN/USERS/SET_TOTAL_USERS_COUNT":return Object(O.a)(Object(O.a)({},e),{},{totalUsersCount:t.totalCount});case"SN/USERS/SET_IS_FETCHING":return Object(O.a)(Object(O.a)({},e),{},{isFetching:t.isFetching});case"SN/USERS/TOGGLE_IS_FOLLOWING_PROGRESS":return Object(O.a)(Object(O.a)({},e),{},{followingInProgress:t.followingInProgress?[].concat(Object(_.a)(e.followingInProgress),[t.id]):Object(_.a)(e.followingInProgress.filter((function(e){return e!==t.id})))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/SET_AUTH_USER_DATA":return Object(O.a)(Object(O.a)(Object(O.a)({},e),t.data),{},{isAuth:!0});default:return e}}}),Ce=Object(T.d)(we,Object(T.a)(Te.a));window.__store__=Ce;var ke=function(e){c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(o.a,{children:Object(j.jsx)(N.a,{store:Ce,children:Object(j.jsx)(Ne,{})})})}),document.getElementById("root"))};ke(Ce.getState()),Ce.subscribe((function(){ke(Ce.getState())})),a()}},[[74,1,2]]]);
//# sourceMappingURL=main.3c1bd403.chunk.js.map